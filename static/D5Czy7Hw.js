import{s as j,p as Y,b as t,E as A,ad as z,q as L,x as q,r as p,D as H,S,ae as K,a as d,F as Q,_ as X,af as Z,h as ee,l as N,w as s,o as m,m as O,d as g,t as y,c as w}from"#entry";import{V as ae}from"./1mk5S31q.js";import{V as te}from"./DK9HV8Ct.js";import{V as le,a as oe}from"./C2R-9fOl.js";import{V as G,b as se,c as ue,f as ne,d as re,a as ie}from"./4Td1EdPI.js";import{V as h}from"./dnzGQPiF.js";import{V as de}from"./D20qIuBp.js";import{V as M,b as ce,f as ve}from"./DifO3NxO.js";import{a as T,m as me,b as fe,c as pe,V as F}from"./eXhokCXr.js";import{f as be}from"./olVGSFH9.js";import{u as B}from"./7kqxRFU_.js";import{V as Ve}from"./un5phzSR.js";import"./Dziq4udP.js";import"./CkvUrmgQ.js";const ge=globalThis.setInterval,ye=Y({...me({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),U=j()({name:"VRadio",props:ye(),setup(u,P){let{slots:_}=P;return B(()=>{const i=T.filterProps(u);return t(T,A(i,{class:["v-radio",u.class],style:u.style,type:"radio"}),_)}),{}}}),Ie=Y({height:{type:[Number,String],default:"auto"},...ce(),...K(fe(),["multiple"]),trueIcon:{type:S,default:"$radioOn"},falseIcon:{type:S,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),Ee=j()({name:"VRadioGroup",inheritAttrs:!1,props:Ie(),emits:{"update:modelValue":u=>!0},setup(u,P){let{attrs:_,slots:i}=P;const I=z(),c=L(()=>u.id||`radio-group-${I}`),n=q(u,"modelValue"),r=p();return B(()=>{const[a,f]=H(_),E=M.filterProps(u),x=T.filterProps(u),b=i.label?i.label({label:u.label,props:{for:c.value}}):u.label;return t(M,A({ref:r,class:["v-radio-group",u.class],style:u.style},a,E,{modelValue:n.value,"onUpdate:modelValue":D=>n.value=D,id:c.value}),{...i,default:D=>{let{id:v,messagesId:k,isDisabled:C,isReadonly:V}=D;return d(Q,null,[b&&t(ve,{id:v.value},{default:()=>[b]}),t(pe,A(x,{id:v.value,"aria-describedby":k.value,defaultsTarget:"VRadio",trueIcon:u.trueIcon,falseIcon:u.falseIcon,type:u.type,disabled:C.value,readonly:V.value,"aria-labelledby":b?v.value:void 0,multiple:!1},f,{modelValue:n.value,"onUpdate:modelValue":R=>n.value=R}),i)])}})}),be({},r)}}),De={class:"d-flex justify-space-between align-center mb-2"},we={class:"d-flex justify-space-between align-center mb-4"},_e={class:"text-white font-weight-bold text-caption"},Ne={key:0},Oe={key:1},Pe={key:2},xe={key:3},Re={class:"custom-loader"},Le={key:0},ke={key:1},Ce=2e3,he={__name:"YTconverter",setup(u){const _=Z().public.apiBaseUrl,i=p(""),I=p("mp3"),c=p(""),n=p(""),r=p(null),a=p("IDLE"),f=p(0),E=p(null),{$curridataAPI:x}=ee(),b=L(function(){return a.value==="PENDING"||a.value==="DOWNLOADING"?"primary":a.value==="COMPLETED"?"success":a.value==="FAILED"||a.value==="ERROR"?"error":"grey"}),D=L(function(){return a.value==="PENDING"?"ç­‰å¾…ä¼ºæœå™¨è™•ç†...":a.value==="DOWNLOADING"?`ä¸‹è¼‰ä¸­... (${f.value.toFixed(1)}%)`:a.value==="COMPLETED"?"ä¸‹è¼‰å®Œæˆï¼":a.value==="FAILED"?"ä»»å‹™å¤±æ•—ï¼":a.value==="ERROR"?"é€£ç·š/è¼ªè©¢éŒ¯èª¤":"æº–å‚™å°±ç·’"}),v=L(function(){return a.value==="PENDING"||a.value==="DOWNLOADING"}),k=async function(){if(c.value="",n.value="",V(),!i.value.trim()||!i.value.startsWith("http")){c.value="è«‹è¼¸å…¥æœ‰æ•ˆçš„ YouTube ç¶²å€ï¼Œä¸¦ç¢ºä¿å®ƒä»¥ http æˆ– https é–‹é ­ã€‚";return}a.value="PENDING",f.value=0,r.value=null,n.value="æ­£åœ¨æäº¤ä¸‹è¼‰ä»»å‹™...";try{const l=JSON.stringify({url:i.value,format:I.value}),e=await x.post("submit_download_job",l),o=e.data;let $=o.job_id||o.id||o.taskId;if(!$)throw o.error||o.message?new Error(`ä¼ºæœå™¨å›å‚³éŒ¯èª¤: ${o.error||o.message}`):new Error(`ä¼ºæœå™¨å›å‚³æ ¼å¼éŒ¯èª¤ï¼Œæ‰¾ä¸åˆ° job_idã€id æˆ– taskIdã€‚å¯¦éš›å›å‚³è³‡æ–™ï¼š${JSON.stringify(e)}`);r.value=$,n.value=`ä»»å‹™å·²æˆåŠŸæäº¤ï¼ŒJob ID: ${r.value}ã€‚é–‹å§‹è¿½è¹¤é€²åº¦...`,C()}catch(l){console.error("æäº¤ä»»å‹™å¤±æ•—:",l);let e=l.message||(typeof l=="object"&&l!==null?JSON.stringify(l):String(l));c.value=`æäº¤ä»»å‹™å¤±æ•—ï¼š${e}`,a.value="FAILED"}},C=function(){V(),R(),E.value=ge(R,Ce)},V=function(){E.value&&(clearInterval(E.value),E.value=null)},R=async function(){if(!r.value){V();return}try{const e=(await x.get(`download_status/${r.value}`)).data;if(!e.status)throw new Error("ä¼ºæœå™¨å›å‚³ç‹€æ…‹æ ¼å¼éŒ¯èª¤ã€‚");a.value=e.status,f.value=e.progress||0,a.value==="COMPLETED"?(V(),n.value="âœ… ä¸‹è¼‰å®Œæˆ (100%)ï¼æª”æ¡ˆå·²åœ¨ä¼ºæœå™¨æº–å‚™å®Œç•¢ã€‚æ­£åœ¨å•Ÿå‹•ä¸‹è¼‰...",J()):a.value==="DOWNLOADING"?n.value=`ä¸‹è¼‰ä¸­ï¼Œé€²åº¦æ›´æ–°è‡³ ${f.value.toFixed(1)}%...`:a.value==="FAILED"&&(V(),c.value="âŒ ä»»å‹™è™•ç†å¤±æ•—ã€‚è«‹æª¢æŸ¥ç¶²å€æˆ–ä¼ºæœå™¨æ—¥èªŒã€‚")}catch(l){console.error("è¼ªè©¢éŒ¯èª¤:",l),V(),a.value="ERROR";let e=l.message||(typeof l=="object"&&l!==null?JSON.stringify(l):String(l));c.value=`è¼ªè©¢ç‹€æ…‹éŒ¯èª¤ï¼š${e}`}},J=function(){if(r.value&&a.value==="COMPLETED"){const l=`${_}/download_file/${r.value}`,e=document.createElement("a");e.href=l,e.setAttribute("download",`media_download_${r.value}.${I.value}`),e.style.display="none",document.body.appendChild(e),e.click(),document.body.removeChild(e),n.value="ğŸ‰ æª”æ¡ˆä¸‹è¼‰å·²é–‹å§‹ã€‚ç€è¦½å™¨å°‡æç¤ºæ‚¨å„²å­˜ä½ç½®ã€‚",setTimeout(function(){a.value="IDLE",f.value=0,r.value=null},3e3)}},W=function(){(a.value==="IDLE"||a.value==="FAILED"||a.value==="ERROR")&&k()};return(l,e)=>(m(),N(ae,null,{default:s(()=>[t(te,{fluid:""},{default:s(()=>[t(le,{justify:"center",align:"start"},{default:s(()=>[t(oe,{cols:"12",sm:"10",md:"8",lg:"6",xl:"5"},{default:s(()=>[t(G,{class:"pa-4 pa-sm-8",elevation:"12",rounded:"xl"},{default:s(()=>[t(se,{class:"text-h4 text-sm-h3 text-center font-weight-bold mb-4"},{default:s(()=>[...e[5]||(e[5]=[g(" YouTubeä¸‹è¼‰å™¨ ",-1)])]),_:1}),t(ue,{class:"text-center mb-6"},{default:s(()=>[...e[6]||(e[6]=[d("p",null,"è¼¸å…¥ YouTube ç¶²å€ï¼Œé¸æ“‡æ ¼å¼ï¼Œä¼ºæœå™¨å°‡åœ¨èƒŒæ™¯è™•ç†ä»»å‹™ã€‚",-1),d("p",null,"ä¾‹å¦‚ï¼šhttps://www.youtube.com/watch?v=JfYbYIv2-tY",-1)])]),_:1}),c.value?(m(),N(h,{key:0,type:"error",closable:"",icon:"mdi-alert-circle",variant:"tonal",class:"mb-4","onUpdate:modelValue":e[0]||(e[0]=o=>c.value="")},{default:s(()=>[e[7]||(e[7]=d("div",{class:"font-weight-medium"},"éŒ¯èª¤:",-1)),g(" "+y(c.value),1)]),_:1})):O("",!0),n.value&&a.value!=="COMPLETED"?(m(),N(h,{key:1,type:"info",icon:"mdi-information-outline",variant:"tonal",class:"mb-4"},{default:s(()=>[e[8]||(e[8]=d("div",{class:"font-weight-medium"},"ç‹€æ…‹:",-1)),g(" "+y(n.value),1)]),_:1})):O("",!0),a.value==="COMPLETED"?(m(),N(h,{key:2,type:"success",icon:"mdi-check-all",variant:"tonal",class:"mb-4","onUpdate:modelValue":e[1]||(e[1]=o=>n.value="")},{default:s(()=>[e[9]||(e[9]=d("div",{class:"font-weight-medium"},"ä¸‹è¼‰å·²å®Œæˆ!",-1)),g(" "+y(n.value),1)]),_:1})):O("",!0),t(de,{modelValue:i.value,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value=o),label:"YouTube å½±ç‰‡ç¶²å€",placeholder:"ä¾‹å¦‚: https://www.youtube.com/watch?v=...",variant:"outlined",disabled:v.value,rules:[o=>!!o||"ç¶²å€ä¸èƒ½ç‚ºç©º"],"prepend-inner-icon":"mdi-link-variant",clearable:"",class:"mb-6"},null,8,["modelValue","disabled","rules"]),t(Ee,{modelValue:I.value,"onUpdate:modelValue":e[3]||(e[3]=o=>I.value=o),label:"é¸æ“‡è¼¸å‡ºæ ¼å¼",inline:"",disabled:v.value,class:"mb-8"},{default:s(()=>[t(U,{label:"MP3 (éŸ³è¨Š)",value:"mp3",color:"primary",icon:"mdi-music-box",class:"mr-4"}),t(U,{label:"MP4 (å½±ç‰‡)",value:"mp4",color:"primary",icon:"mdi-video",class:"mr-4"})]),_:1},8,["modelValue","disabled"]),r.value?(m(),N(G,{key:3,loading:v.value,color:b.value,variant:"tonal",class:"mb-6 pa-4"},{default:s(()=>[d("div",De,[e[10]||(e[10]=d("span",{class:"text-subtitle-1 font-weight-medium"},"ä»»å‹™ ID:",-1)),t(F,{color:b.value,variant:"flat",size:"small"},{default:s(()=>[g(y(r.value),1)]),_:1},8,["color"])]),d("div",we,[e[11]||(e[11]=d("span",{class:"text-subtitle-1 font-weight-medium"},"ç›®å‰ç‹€æ…‹:",-1)),t(F,{color:b.value,variant:"outlined",size:"default"},{default:s(()=>[g(y(D.value),1)]),_:1},8,["color"])]),t(ne,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=o=>f.value=o),color:b.value,height:"16",rounded:"",striped:"",class:"my-2"},{default:s(({value:o})=>[d("span",_e,y(o.toFixed(1))+"% ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["loading","color"])):O("",!0),t(re,{onClick:W,loading:v.value,disabled:v.value,color:v.value?"primary":"success",size:"x-large",block:"",elevation:"8",rounded:"lg",class:"text-button"},{loader:s(()=>[d("span",Re,[t(Ve,{icon:"mdi-cached",class:"spin-icon"}),e[12]||(e[12]=g(" è™•ç†ä¸­... ",-1))])]),default:s(()=>[a.value==="IDLE"||a.value==="FAILED"||a.value==="ERROR"?(m(),w("span",Ne,"é–‹å§‹ä¸‹è¼‰")):a.value==="COMPLETED"?(m(),w("span",Oe,"ä¸‹è¼‰å®Œæˆ (é»æ“Šå³å¯é‡æ–°æäº¤)")):a.value==="PENDING"?(m(),w("span",Pe,"æäº¤ä¸­...")):a.value==="DOWNLOADING"?(m(),w("span",xe,y(D.value),1)):O("",!0)]),_:1},8,["loading","disabled","color"]),t(ie,{class:"text-caption text-center mt-6 text-grey-darken-1"},{default:s(()=>[e[13]||(e[13]=g(" **å‚™è¨»:** ",-1)),v.value?(m(),w("span",Le,"ä¼ºæœå™¨æ­£åœ¨èƒŒæ™¯è™•ç†æ‚¨çš„è«‹æ±‚ã€‚è«‹ä¸è¦é—œé–‰é é¢ã€‚")):(m(),w("span",ke,"ä¸‹è¼‰æ™‚é–“å–æ±ºæ–¼ä¼ºæœå™¨è™•ç†é€Ÿåº¦èˆ‡æª”æ¡ˆå¤§å°ã€‚"))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}},qe=X(he,[["__scopeId","data-v-5ab031ce"]]);export{qe as default};
