import"./CrRjTCCi.js";import{v as b,h as x}from"./C8WRQOr-.js";import{a as m,m as y}from"./BvfaC3Sv.js";import{f as S}from"./olVGSFH9.js";import{x as D,v as L,z as p,r as w,ag as A,aj as F,E as v,s as u,b as g,aq as B,H as I}from"#entry";import{u as R}from"./CsFBHHeY.js";import{V as T}from"./BFs1KdCe.js";import{u as H}from"./BVTHWD1S.js";const M=b("v-spacer","div","VSpacer"),O=L({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...y({origin:"center center",scrollStrategy:"block",transition:{component:T},zIndex:2400})},"VDialog"),G=D()({name:"VDialog",props:O(),emits:{"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,E){let{emit:f,slots:d}=E;const c=p(e,"modelValue"),{scopeId:V}=R(),t=w();function s(o){const i=o.relatedTarget,r=o.target;if(i!==r&&t.value?.contentEl&&t.value?.globalTop&&![document,t.value.contentEl].includes(r)&&!t.value.contentEl.contains(r)){const a=B(t.value.contentEl);if(!a.length)return;const l=a[0],n=a[a.length-1];i===l?n.focus():l.focus()}}A(()=>{document.removeEventListener("focusin",s)}),F&&v(()=>c.value&&e.retainFocus,o=>{o?document.addEventListener("focusin",s):document.removeEventListener("focusin",s)},{immediate:!0});function h(){f("afterEnter"),(e.scrim||e.retainFocus)&&t.value?.contentEl&&!t.value.contentEl.contains(document.activeElement)&&t.value.contentEl.focus({preventScroll:!0})}function P(){f("afterLeave")}return v(c,async o=>{o||(await I(),t.value.activatorEl?.focus({preventScroll:!0}))}),H(()=>{const o=m.filterProps(e),i=u({"aria-haspopup":"dialog"},e.activatorProps),r=u({tabindex:-1},e.contentProps);return g(m,u({ref:t,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},o,{modelValue:c.value,"onUpdate:modelValue":a=>c.value=a,"aria-modal":"true",activatorProps:i,contentProps:r,height:e.fullscreen?void 0:e.height,width:e.fullscreen?void 0:e.width,maxHeight:e.fullscreen?void 0:e.maxHeight,maxWidth:e.fullscreen?void 0:e.maxWidth,role:"dialog",onAfterEnter:h,onAfterLeave:P},V),{activator:d.activator,default:function(){for(var a=arguments.length,l=new Array(a),n=0;n<a;n++)l[n]=arguments[n];return g(x,{root:"VDialog"},{default:()=>[d.default?.(...l)]})}})}),S({},t)}});export{G as V,M as a};
